# ==============================================
# Arzu Simulator - 环境变量配置模板
# ==============================================
# 
# 使用说明：
# 1. 复制此文件为 .env (不要提交到 Git)
# 2. 替换所有 <...> 占位符为实际值
# 3. 在 Render Dashboard 中逐项添加这些环境变量
#
# ==============================================

# ==============================================
# 后端环境变量 (Web Service)
# ==============================================

# --- 基础配置 ---
NODE_ENV=production
PORT=3001

# --- JWT 认证配置 ---
# 生成方式 (PowerShell):
#   -join ((65..90) + (97..122) + (48..57) | Get-Random -Count 64 | % {[char]$_})
# 或 (Linux/Mac):
#   openssl rand -base64 48

JWT_SECRET=<生成64位随机字符串，例如: a8f3d9e2c1b7f4g6h8j9k0l1m2n3o4p5q6r7s8t9u0v1w2x3y4z5A6B7C8D9E0F1>
JWT_REFRESH_SECRET=<生成另一个64位随机字符串，必须与JWT_SECRET不同>
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# --- 数据库配置 ---
# Render 持久化磁盘路径
DATABASE_PATH=/var/data/database.db

# 本地开发时使用
# DATABASE_PATH=./database.db

# --- CORS 配置 ---
# 前端域名（部署后填写）
CORS_ORIGIN=https://<你的前端域名>.onrender.com

# 本地开发时使用
# CORS_ORIGIN=http://localhost:5173

# --- 日志配置 ---
LOG_LEVEL=info
# 可选值: error, warn, info, debug

# --- 安全配置 ---
BCRYPT_ROUNDS=10

# --- 服务器配置 (可选) ---
SERVER_TIMEOUT=30000
# 单位: 毫秒

# --- 限流配置 (可选) ---
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ==============================================
# 前端环境变量 (Static Site)
# ==============================================

# --- API 配置 ---
# 后端 API 地址（部署后填写）
VITE_API_URL=https://<你的后端域名>.onrender.com

# 本地开发时使用
# VITE_API_URL=http://localhost:3001

# --- 应用配置 (可选) ---
VITE_APP_NAME=Arzu Simulator
VITE_APP_VERSION=1.0.0

# --- 功能开关 (可选) ---
VITE_ENABLE_ANALYTICS=false
VITE_ENABLE_DEBUG=false

# ==============================================
# 本地开发环境变量
# ==============================================

# 创建 Arzu_simulator_back/.env 文件，内容如下：

# NODE_ENV=development
# PORT=3001
# JWT_SECRET=dev_secret_key_change_in_production
# JWT_REFRESH_SECRET=dev_refresh_secret_key_change_in_production
# JWT_EXPIRES_IN=15m
# JWT_REFRESH_EXPIRES_IN=7d
# DATABASE_PATH=./database.db
# CORS_ORIGIN=http://localhost:5173
# LOG_LEVEL=debug
# BCRYPT_ROUNDS=10

# ==============================================

# 创建 Arzu_simulator_front/.env 文件，内容如下：

# VITE_API_URL=http://localhost:3001
# VITE_APP_NAME=Arzu Simulator (Dev)
# VITE_APP_VERSION=1.0.0-dev
# VITE_ENABLE_DEBUG=true

# ==============================================
# 安全提示
# ==============================================
# 
# ⚠️ 重要安全注意事项：
# 
# 1. 永远不要将 .env 文件提交到 Git
#    - 确保 .gitignore 包含 .env
# 
# 2. JWT 密钥必须强且唯一
#    - 生产环境至少 64 位
#    - JWT_SECRET 和 JWT_REFRESH_SECRET 必须不同
# 
# 3. 定期轮换密钥
#    - 建议每 3-6 个月更换 JWT 密钥
#    - 更换后所有用户需重新登录
# 
# 4. CORS 配置要精确
#    - 生产环境避免使用 * 通配符
#    - 只允许信任的前端域名
# 
# 5. 数据库路径
#    - Render 生产环境: /var/data/database.db
#    - 本地开发: ./database.db 或绝对路径
# 
# 6. 环境变量管理
#    - 使用 Render Dashboard 管理生产环境变量
#    - 使用 .env 文件管理本地开发变量
#    - 团队协作时，通过安全渠道共享密钥
# 
# ==============================================
# Render 部署检查清单
# ==============================================
# 
# 后端 (Web Service):
# □ NODE_ENV=production
# □ PORT=3001
# □ JWT_SECRET (64位随机字符串)
# □ JWT_REFRESH_SECRET (64位随机字符串，不同于JWT_SECRET)
# □ JWT_EXPIRES_IN=15m
# □ JWT_REFRESH_EXPIRES_IN=7d
# □ DATABASE_PATH=/var/data/database.db
# □ CORS_ORIGIN=https://你的前端域名.onrender.com
# □ LOG_LEVEL=info
# □ BCRYPT_ROUNDS=10
# □ 已添加 Disk: /var/data (1GB)
# 
# 前端 (Static Site):
# □ VITE_API_URL=https://你的后端域名.onrender.com
# □ VITE_APP_NAME=Arzu Simulator
# □ VITE_APP_VERSION=1.0.0
# □ 已配置重定向规则: /* → /index.html
# 
# 集成测试:
# □ 后端健康检查通过 (/health)
# □ 前端可以访问
# □ 可以注册新用户
# □ 可以登录
# □ 可以创建任务
# □ 番茄钟功能正常
# □ 重启后数据不丢失
# 
# ==============================================
